function loadDataTable(n,t,i,r,u){dataTable=$("#tblData").DataTable({dom:"B<'row'<'col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 'l><'col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12'f>>tr<'row mt-3'<'col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12'i><'col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12'p>>",buttons:[{extend:"pdfHtml5",text:n,filename:"VisitorBook-Users",orientation:"landscape",pageSize:"A4",customize:function(n){n.content[1].table.widths=Array(n.content[1].table.body[0].length+1).join("*").split("");n.content.splice(0,1);n.pageMargins=[20,20,20,20];n.defaultStyle.fontSize=12;n.styles.tableHeader.fontSize=14;var t={};t.hLineWidth=function(){return.5};t.vLineWidth=function(){return.5};t.hLineColor=function(){return"#aaa"};t.vLineColor=function(){return"#aaa"};t.paddingLeft=function(){return 4};t.paddingRight=function(){return 4};n.content[0].layout=t},exportOptions:{columns:[0,1,2,3]}},],language:{url:r},preDrawCallback:function(){var n=$(".dt-button, .buttons-pdf, .buttons-html5");n.removeClass();n.addClass("btn btn-success ml-2");n.attr("id","ExportBtn");$("#ExportBtn").prependTo($("#outside"))},processing:!0,serverSide:!0,filter:!0,responsive:!0,ajax:{url:"/app/user/getall",type:"POST",datatype:"json"},columns:[{data:"name",width:"30%"},{data:"surname",width:"30%"},{data:"birthDate",width:"12%",render:function(n){return moment(n).format("DD/MM/YYYY")}},{data:"gender",width:"8%"},{data:"id",render:function(n){return`
                            <div class="d-flex justify-content-around align-items-center">
                               <a onclick="showInPopup('/app/user/edit/${n}', 
                               '${u}')" class="btn btn-warning"> ${t}</a>
                               <a onclick=deleteRecord('/app/user/delete/${n}') class="btn btn-danger">
                                  ${i}
                               </a>
                            </div>
                           `},width:"20%"},],columnDefs:[{targets:[4],orderable:!1},]})}function fillCountyList(n,t){$.ajax({type:"GET",url:"/app/county/getallbycity?cityId="+n,success:function(n){$("#county-id").empty();var i=document.getElementById("AddOrEditModalCountySelectionText").value;$("#county-id").append($('<option disabled value="0">'+i+"<\/option>"));$.each(n.data,function(n,t){$("#county-id").append($('<option value="'+t.id+'">'+t.name+"<\/option>"))});$("#county-id option:eq("+t+")").prop("selected",!0)},error:function(n){console.log(n)}})}function deleteRecord(n){var t=document.getElementById("DeleteRequestPopupTitleText").value,i=document.getElementById("DeleteRequestPopupBodyText").value,r=document.getElementById("DeleteRequestPopupConfirmBtnText").value,u=document.getElementById("DeleteRequestPopupCancelBtnText").value;return Swal.fire({title:t,text:i,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r,cancelButtonText:u}).then(t=>{t.isConfirmed&&$.ajax({type:"GET",url:n,success:function(n){dataTable.ajax.reload();toastr.success(n.message)},error:function(n,t){var t=eval("("+n.responseText+")");toastr.error(t.message)}})}),!1}function cityChange(){if($("#citylist option:selected").val()==0)$("#countylist").hide();else{$("#countylist").show();var n=$("#citylist option:selected").val();fillCountyList(n,0)}}var dataTable;$(document).ready(function(){$.fn.dataTable.moment("DD/MM/YYYY");var t=document.getElementById("TableExportBtnText").value,i=document.getElementById("TableEditBtnText").value,r=document.getElementById("TableDeleteBtnText").value,u=document.getElementById("UsersEditModalTitleText").value,f=document.getElementById("ActiveLanguage").value,n="";n=f=="tr-TR"?"//cdn.datatables.net/plug-ins/1.13.6/i18n/tr.json":"//cdn.datatables.net/plug-ins/1.13.6/i18n/en-GB.json";loadDataTable(t,i,r,n,u)});$("#general-modal").on("hidden.bs.modal",function(){$("#general-modal").removeClass("modal-lg")});showInPopup=(n,t)=>{$.ajax({type:"GET",url:n,success:function(n){$("#form-modal .modal-body").html(n);$("#form-modal .modal-title").html(t);$("#general-modal").addClass("modal-lg");$("#form-modal").modal("show");$("#citylist option:selected").val()==0?$("#countylist").hide():$("#countylist").show()}})};AddRecord=n=>{try{$.ajax({type:"POST",url:n.action,data:new FormData(n),contentType:!1,processData:!1,success:function(n){n.isValid?($("#form-modal .modal-body").html(""),$("#form-modal .modal-title").html(""),$("#form-modal").modal("hide"),dataTable.ajax.reload(),toastr.success(n.message)):$("#form-modal .modal-body").html(n.html)},error:function(n){console.log(n)}})}catch(t){console.log(t)}return!1};EditRecord=n=>{try{$.ajax({type:"POST",url:n.action,data:new FormData(n),contentType:!1,processData:!1,success:function(n){n.isValid?($("#form-modal .modal-body").html(""),$("#form-modal .modal-title").html(""),$("#form-modal").modal("hide"),dataTable.ajax.reload(),toastr.success(n.message)):$("#form-modal .modal-body").html(n.html)},error:function(n){console.log(n)}})}catch(t){console.log(t)}return!1};